<h2 class="text-center">
  Poster une annonce</h2>
  <%= form_for @bid, url: {controller:"bids",action: "create"}, html: {class: "nifty_form"} do |f| %>
  <% if @bid.errors.any? %>
  <div id="error_explanation">
    <h2><%= pluralize(@bid.errors.count, "erreur qui a empêché ") %>
      la suite:</h2>

      <ul>
        <% @bid.errors.full_messages.each do |message| %>
        <li><%= message %></li>
        <% end %>
      </ul>
    </div>
    <% end %>
  <div class="post1">
    <p>
    <span class="numetape ">1</span>
<button type="button" name="button" class="trajettype trajactif" id="trajetA">ALLER</button>
<button type="button" name="button" class="trajettype" id="trajetAR">ALLER et RETOUR</button>
<button type="button" name="button" class="trajettype" id="trajetR">
  RETOUR</button>
</p>
</div>

<div class="post2">
  <p>
  <span class="numetape">2</span> Détailler:
</p>
<div class="topformular"></div>
<div id="destA">

  <div class="field col-md-5 postbiditem">
    <%= image_tag(current_user.avatar, size:"60")%>
    <%= current_user.username%>
  </div>
  <div class="col-md-2 postbiditem">
    <i class="fa fa-arrow-right fa-3x text-center" aria-hidden="true"></i>
  </div>
  <div class="field col-md-5">
    <div class="field">
      <%= f.label "Enseigne" %><br>
      <%= f.collection_select :brand_id, Brand.order(:name), :id, :name, include_blank: true, placeholder: "" %>
    </div>

    <div class="field">
      <%= f.label "Magasin" %><br>
      <%= f.grouped_collection_select :shop_id, Brand.order(:name), :shops, :name, :id, :name, include_blank: true, placeholder: "" %>
    </div>
  </div>
</div>



<div id="destR">

  <div class="field col-md-5">
    <div class="field">
      <%= f.label "Enseigne" %><br>
      <%= f.collection_select :brand_id, Brand.order(:name), :id, :name, include_blank: true, placeholder: "" %>
    </div>
    <div class="field">
      <%= f.label "Magasin" %><br>
      <%= f.grouped_collection_select :shop_id, Brand.order(:name), :shops, :name, :id, :name, include_blank: true, placeholder: "" %>
    </div>
  </div>
  <div class="col-md-2 postbiditem">
    <i class="fa fa-arrow-right fa-3x text-center" aria-hidden="true"></i>
  </div>
    <div class="field col-md-5 postbiditem">
      <%= image_tag(current_user.avatar, size:"60")%>
      <%= current_user.username%>
    </div>

</div>



<div id="heureA" class=" col-md-12">

  <div class="field">
    <%= f.label "Date et Heure de départ:" %><br>
    <%= f.datetime_select :go_at, min: Time.now, max: 3.month.from_now%>
  </div>
</div>

<div id="heureR" class="col-md-12">
  <div class="field">
    <%= f.label "Date et Heure de retour" %><br>
    <%= f.datetime_select :come_back %>
  </div>
</div>

<div class="field col-md-12">
  <%= f.label "Nombre de passager"  %><br>
  <%= f.number_field :nbrplace, min:1, max:4 %>
</div>
<div class="field col-md-12 hidden">
  <%= f.label "Je covoite aussi au retour"  %><br>
  <%= f.check_box :withreturn, input_html: { checked: false }%>
</div>
<div class="field col-md-12 hidden">
  <%= f.label "c'est le trajet retour"  %><br>
  <%= f.check_box :isreturn, input_html: { checked: false }%>
</div>
</div>
<div class="actions" id="btnpost">
  <%= f.submit "Poster la(les) annonce(s)", :class => "btn btn-login form-control"%>

</div>
<% end %>
<script type="text/javascript">
$('#trajetA').click(function () {
  $(this).addClass( "trajactif" );
  $('#trajetAR').removeClass( "trajactif" );
  $('#trajetR').removeClass( "trajactif" );
    $('#heureR').hide(1000); //time for show
    $('#destR').hide(1000); //time for show
    $('#heureA').show(1000); //time for show
    $('#destA').show(1000); //time for show
    $('#bid_withreturn')[0].checked = false;
    $('#bid_isreturn')[0].checked = false;
});
$('#trajetAR').click(function () {
  $(this).addClass( "trajactif" );
  $('#trajetA').removeClass( "trajactif" );
  $('#trajetR').removeClass( "trajactif" );
    $('#heureR').show(1000); //time for show
    $('#heureA').show(1000); //time for show
    $('#destA').show(1000); //time for show
    $('#destR').hide(1000); //time for show
    $('#bid_withreturn')[0].checked = true;
    $('#bid_isreturn')[0].checked = true;
});
$('#trajetR').click(function () {
  $(this).addClass( "trajactif" );
  $('#trajetA').removeClass( "trajactif" );
  $('#trajetAR').removeClass( "trajactif" );
    $('#heureR').show(1000); //time for show
    $('#destR').show(1000); //time for show
    $('#heureA').hide(1000); //time for show
    $('#destA').hide(1000); //time for show
    $('#bid_withreturn')[0].checked = false;
    $('#bid_isreturn')[0].checked = true;
});


</script>
